<!-- Job Detail View -->
<div id="job-detail-view" class="d-none">
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <div class="d-flex align-items-center">
            <button class="btn btn-outline-secondary me-3" id="back-to-jobs-btn">
                <i class="bi bi-arrow-left"></i>
                Back to Jobs
            </button>
            <h1 class="h2 mb-0">Job Detail</h1>
        </div>
        <div class="btn-toolbar mb-2 mb-md-0">
            <button class="btn btn-outline-primary me-2" id="edit-job-btn">
                <i class="bi bi-pencil"></i>
                Edit Job
            </button>
            <button class="btn btn-outline-danger" id="delete-job-detail-btn">
                <i class="bi bi-trash"></i>
                Delete Job
            </button>
        </div>
    </div>

    <!-- Job Header -->
    <div class="job-header-card">
        <div class="d-flex align-items-center mb-3">
            <i class="bi bi-briefcase fs-2 me-3 text-primary"></i>
            <div>
                <h3 class="mb-1" id="job-detail-title">Job-sample</h3>
                <div class="text-muted">
                    <span class="me-3"><strong>ID:</strong> <span id="job-detail-id">123456</span></span>
                    <span class="me-3"><strong>CreatedBy:</strong> <span id="job-detail-creator">Alias</span></span>
                    <span><strong>Creation Time:</strong> <span id="job-detail-creation-time">2025-06-23 14:57</span></span>
                </div>
            </div>
        </div>
        <div class="mb-3">
            <strong>Description:</strong> <span id="job-detail-description">Test with recommend tool refine</span>
        </div>
    </div>

    <!-- Overall Result -->
    <div class="result-section">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h4>Overall Result</h4>
            <a href="#" class="text-primary text-decoration-none">
                <i class="bi bi-arrow-right"></i>
                See more task details
            </a>
        </div>
        
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="metric-card text-center">
                    <div class="metric-label">Completed</div>
                    <div class="metric-value" id="job-completed-tasks">63</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card text-center">
                    <div class="metric-label text-success">Success</div>
                    <div class="metric-value text-success" id="job-success-tasks">58</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card text-center">
                    <div class="metric-label text-danger">Failed</div>
                    <div class="metric-value text-danger" id="job-failed-tasks">5</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card text-center">
                    <div class="metric-label text-primary">Success Rate</div>
                    <div class="metric-value text-primary" id="job-success-rate">92%</div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-md-4">
                <div class="metric-card text-center">
                    <div class="metric-label">Avg Success Iterations/task</div>
                    <div class="metric-value" id="job-avg-iterations">10</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="metric-card text-center">
                    <div class="metric-label">Avg AI Integration per Task</div>
                    <div class="metric-value" id="job-avg-ai-integration">10</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="metric-card text-center">
                    <div class="metric-label">Avg code edits Iteration per Success Task</div>
                    <div class="metric-value" id="job-iterations-changes">xx</div>
                </div>
            </div>
        </div>

        <!-- Tool Call Section -->
        <div class="tool-call-section mb-4">
            <h5><i class="bi bi-wrench"></i> Tool call:</h5>
            <div class="row">
                <div class="col-md-2">
                    <div class="tool-metric">
                        <div class="tool-label">Recommend</div>
                        <div class="tool-value" id="tool-recommend">xx</div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="tool-metric">
                        <div class="tool-label">Predeploy</div>
                        <div class="tool-value" id="tool-predeploy">xx</div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="tool-metric">
                        <div class="tool-label">Deploy</div>
                        <div class="tool-value" id="tool-deploy">xx</div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="tool-metric">
                        <div class="tool-label">Region</div>
                        <div class="tool-value" id="tool-region">xx</div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="tool-metric">
                        <div class="tool-label">Quota</div>
                        <div class="tool-value" id="tool-quota">xx</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Classification Results -->
    <div class="classification-section">
        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="classification-card">
                    <div class="classification-header">
                        <h5>Result classified by Model</h5>
                        <div class="tags">
                            <span class="tag">Language model</span>
                            <span class="tag">all</span>
                            <span class="tag">Compute Resource Note</span>
                            <span class="tag">result</span>
                            <span class="tag">all</span>
                            <span class="tag">Binding Resource Note</span>
                            <span class="tag">result</span>
                            <span class="tag">all</span>
                        </div>
                    </div>
                    <div class="classification-content">
                        <div class="classification-item">
                            <span class="model-name">Claude-3.5</span>
                            <span class="model-stats">Success Rate: <span id="claude-35-success-rate">85%</span> | Avg Iteration: <span id="claude-35-avg-iteration">8.5</span></span>
                        </div>
                        <div class="classification-item">
                            <span class="model-name">Claude-3.7</span>
                            <span class="model-stats">Success Rate: <span id="claude-37-success-rate">92%</span> | Avg Iteration: <span id="claude-37-avg-iteration">7.2</span></span>
                        </div>
                        <div class="classification-item">
                            <span class="model-name">Claude-4.0</span>
                            <span class="model-stats">Success Rate: <span id="claude-40-success-rate">88%</span> | Avg Iteration: <span id="claude-40-avg-iteration">6.8</span></span>
                        </div>
                        <div class="classification-item">
                            <span class="model-name">GPT-4.1</span>
                            <span class="model-stats">Success Rate: <span id="gpt-41-success-rate">90%</span> | Avg Iteration: <span id="gpt-41-avg-iteration">7.5</span></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 mb-4">
                <div class="classification-card">
                    <div class="classification-header">
                        <h5>Result classified by language</h5>
                        <div class="tags">
                            <span class="tag">Model</span>
                            <span class="tag">result</span>
                            <span class="tag">all</span>
                            <span class="tag">Compute Resource Note</span>
                            <span class="tag">result</span>
                            <span class="tag">all</span>
                            <span class="tag">Binding Resource Note</span>
                            <span class="tag">result</span>
                            <span class="tag">all</span>
                        </div>
                    </div>
                    <div class="classification-content">
                        <div class="classification-item">
                            <span class="model-name">Java</span>
                            <span class="model-stats">Success Rate: <span id="java-success-rate">88%</span> | Avg Iteration: <span id="java-avg-iteration">9.2</span></span>
                        </div>
                        <div class="classification-item">
                            <span class="model-name">Dotnet</span>
                            <span class="model-stats">Success Rate: <span id="dotnet-success-rate">85%</span> | Avg Iteration: <span id="dotnet-avg-iteration">8.7</span></span>
                        </div>
                        <div class="classification-item">
                            <span class="model-name">Jsts</span>
                            <span class="model-stats">Success Rate: <span id="jsts-success-rate">90%</span> | Avg Iteration: <span id="jsts-avg-iteration">7.8</span></span>
                        </div>
                        <div class="classification-item">
                            <span class="model-name">Python</span>
                            <span class="model-stats">Success Rate: <span id="python-success-rate">92%</span> | Avg Iteration: <span id="python-avg-iteration">7.3</span></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 mb-4">
                <div class="classification-card">
                    <div class="classification-header">
                        <h5>Result classified by resource type</h5>
                        <div class="tags">
                            <span class="tag">Language</span>
                            <span class="tag">result</span>
                            <span class="tag">all</span>
                            <span class="tag">Model</span>
                            <span class="tag">result</span>
                            <span class="tag">all</span>
                        </div>
                    </div>
                    <div class="classification-content">
                        <div class="classification-subtitle">Num of Compute Resource + Num of Binding Resource</div>
                        <div class="classification-item">
                            <span class="model-name">1 + 0</span>
                            <span class="model-stats">Success Rate: <span id="resource-1-0-success-rate">95%</span> | Avg Iteration: <span id="resource-1-0-avg-iteration">6.5</span></span>
                        </div>
                        <div class="classification-item">
                            <span class="model-name">1 + 1</span>
                            <span class="model-stats">Success Rate: <span id="resource-1-1-success-rate">88%</span> | Avg Iteration: <span id="resource-1-1-avg-iteration">8.2</span></span>
                        </div>
                        <div class="classification-item">
                            <span class="model-name">1 + N</span>
                            <span class="model-stats">Success Rate: <span id="resource-1-n-success-rate">82%</span> | Avg Iteration: <span id="resource-1-n-avg-iteration">9.8</span></span>
                        </div>
                        <div class="classification-item">
                            <span class="model-name">N + 0</span>
                            <span class="model-stats">Success Rate: <span id="resource-n-0-success-rate">75%</span> | Avg Iteration: <span id="resource-n-0-avg-iteration">11.2</span></span>
                        </div>
                        <div class="classification-item">
                            <span class="model-name">N + 1</span>
                            <span class="model-stats">Success Rate: <span id="resource-n-1-success-rate">70%</span> | Avg Iteration: <span id="resource-n-1-avg-iteration">12.5</span></span>
                        </div>
                        <div class="classification-item">
                            <span class="model-name">N + N</span>
                            <span class="model-stats">Success Rate: <span id="resource-n-n-success-rate">65%</span> | Avg Iteration: <span id="resource-n-n-avg-iteration">14.3</span></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 mb-4">
                <div class="classification-card">
                    <div class="classification-header">
                        <h5>Result classified by specific repo</h5>
                        <div class="tags">
                            <span class="tag">Model</span>
                            <span class="tag">result</span>
                            <span class="tag">all</span>
                        </div>
                    </div>
                    <div class="classification-content">
                        <div class="classification-subtitle">Task Name</div>
                        <div class="classification-item">
                            <span class="model-name">airSonic</span>
                            <span class="model-stats">Success Rate: <span id="airsonic-success-rate">92%</span> | Avg Iteration: <span id="airsonic-avg-iteration">7.8</span></span>
                        </div>
                        <div class="classification-item">
                            <span class="model-name">assessmentManager</span>
                            <span class="model-stats">Success Rate: <span id="assessment-success-rate">85%</span> | Avg Iteration: <span id="assessment-avg-iteration">9.1</span></span>
                        </div>
                        <div class="classification-item">
                            <span class="model-name">before-container</span>
                            <span class="model-stats">Success Rate: <span id="before-container-success-rate">78%</span> | Avg Iteration: <span id="before-container-avg-iteration">10.5</span></span>
                        </div>
                        <div class="classification-item">
                            <span class="model-name">tasktracker</span>
                            <span class="model-stats">Success Rate: <span id="tasktracker-success-rate">89%</span> | Avg Iteration: <span id="tasktracker-avg-iteration">8.3</span></span>
                        </div>
                        <div class="classification-item">
                            <span class="model-name">task-2</span>
                            <span class="model-stats">Success Rate: <span id="task-2-success-rate">83%</span> | Avg Iteration: <span id="task-2-avg-iteration">9.7</span></span>
                        </div>
                        <div class="classification-item">
                            <span class="model-name">task-3</span>
                            <span class="model-stats">Success Rate: <span id="task-3-success-rate">87%</span> | Avg Iteration: <span id="task-3-avg-iteration">8.9</span></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Failed Tasks Section -->
    <div class="failed-tasks-section">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h4><i class="bi bi-exclamation-triangle text-warning me-2"></i>Failed Tasks Analysis</h4>
            <span class="badge bg-danger" id="failed-tasks-count">5 Failed Tasks</span>
        </div>
        
        <div class="failed-tasks-card">
            <div class="failed-tasks-header">
                <div class="row fw-bold text-muted">
                    <div class="col-md-3">Task Name</div>
                    <div class="col-md-3">Error Category</div>
                    <div class="col-md-6">First Error Description</div>
                </div>
            </div>
            <div class="failed-tasks-content" id="failed-tasks-content">
                <div class="failed-task-item">
                    <div class="row align-items-center">
                        <div class="col-md-3">
                            <span class="task-name">tasktracker-deploy</span>
                        </div>
                        <div class="col-md-3">
                            <span class="error-category badge bg-danger-subtle text-danger">Deployment Error</span>
                        </div>
                        <div class="col-md-6">
                            <span class="error-description">Failed to deploy container: Resource quota exceeded in region eastus</span>
                        </div>
                    </div>
                </div>
                <div class="failed-task-item">
                    <div class="row align-items-center">
                        <div class="col-md-3">
                            <span class="task-name">airsonic-config</span>
                        </div>
                        <div class="col-md-3">
                            <span class="error-category badge bg-warning-subtle text-warning">Configuration Error</span>
                        </div>
                        <div class="col-md-6">
                            <span class="error-description">Invalid database connection string format in appsettings.json</span>
                        </div>
                    </div>
                </div>
                <div class="failed-task-item">
                    <div class="row align-items-center">
                        <div class="col-md-3">
                            <span class="task-name">assessment-build</span>
                        </div>
                        <div class="col-md-3">
                            <span class="error-category badge bg-info-subtle text-info">Build Error</span>
                        </div>
                        <div class="col-md-6">
                            <span class="error-description">Compilation failed: Missing dependency Microsoft.AspNetCore.Mvc v6.0.0</span>
                        </div>
                    </div>
                </div>
                <div class="failed-task-item">
                    <div class="row align-items-center">
                        <div class="col-md-3">
                            <span class="task-name">before-container-test</span>
                        </div>
                        <div class="col-md-3">
                            <span class="error-category badge bg-secondary-subtle text-secondary">Test Error</span>
                        </div>
                        <div class="col-md-6">
                            <span class="error-description">Unit tests failed: 3 out of 15 test cases failed due to timeout</span>
                        </div>
                    </div>
                </div>
                <div class="failed-task-item">
                    <div class="row align-items-center">
                        <div class="col-md-3">
                            <span class="task-name">task-2-infrastructure</span>
                        </div>
                        <div class="col-md-3">
                            <span class="error-category badge bg-danger-subtle text-danger">Infrastructure Error</span>
                        </div>
                        <div class="col-md-6">
                            <span class="error-description">Terraform apply failed: Cannot create storage account, name already exists</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
