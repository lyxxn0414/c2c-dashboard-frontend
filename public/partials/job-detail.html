<!-- Job Detail View -->
<div id="job-detail-view" class="d-none">
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">        <div class="d-flex align-items-center">
            <button class="btn btn-outline-secondary me-3" id="back-to-jobs-btn">
                <i class="bi bi-arrow-left"></i>
                Back to Jobs
            </button>
            <h1 class="h2 mb-0">Job Detail</h1>
        </div>
        <div class="btn-toolbar mb-2 mb-md-0">
            <button class="btn btn-outline-primary me-2" id="edit-job-btn">
                <i class="bi bi-pencil"></i>
                Edit Job
            </button>
        </div>
    </div>

    <!-- Job Header -->
    <div class="job-header-card">
        <div class="d-flex align-items-center mb-3">
            <i class="bi bi-briefcase fs-2 me-3 text-primary"></i>
            <div>
                <h3 class="mb-1" id="job-detail-title">Job-sample</h3>
                <div class="text-muted">
                    <span class="me-3"><strong>ID:</strong> <span id="job-detail-id">123456</span></span>
                    <span class="me-3"><strong>CreatedBy:</strong> <span id="job-detail-creator">Alias</span></span>
                    <span><strong>Creation Time:</strong> <span id="job-detail-creation-time">2025-06-23 14:57</span></span>
                </div>
            </div>
        </div>
        <div class="mb-3">
            <strong>Description:</strong> <span id="job-detail-description">Test with recommend tool refine</span>
        </div>
    </div>

    <!-- Overall Result -->
    <div class="result-section">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h4>Overall Result</h4>            <a href="#" class="text-primary text-decoration-none" id="see-task-details-link">
                <i class="bi bi-arrow-right"></i>
                See more task details
            </a>
        </div>
        
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="metric-card text-center">
                    <div class="metric-label">Completed</div>
                    <div class="metric-value" id="job-completed-tasks">63</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card text-center">
                    <div class="metric-label text-success">Success</div>
                    <div class="metric-value text-success" id="job-success-tasks">58</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card text-center">
                    <div class="metric-label text-danger">Failed</div>
                    <div class="metric-value text-danger" id="job-failed-tasks">5</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card text-center">
                    <div class="metric-label text-primary">Success Rate</div>
                    <div class="metric-value text-primary" id="job-success-rate">92%</div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-md-4">
                <div class="metric-card text-center">
                    <div class="metric-label">Avg Iterations per Success Task</div>
                    <div class="metric-value" id="job-avg-iterations">10</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="metric-card text-center">
                    <div class="metric-label">Avg Code Edits per Success Task</div>
                    <div class="metric-value" id="job-iterations-changes">xx</div>
                </div>
            </div>
            <!-- <div class="col-md-4">
                <div class="metric-card text-center">
                    <div class="metric-label">Avg AI Integration per Task</div>
                    <div class="metric-value" id="job-avg-ai-integration">10</div>
                </div>
            </div> -->
        </div>

        <!-- Tool Call Section -->
        <div class="tool-call-section mb-4">
            <h5><i class="bi bi-wrench"></i> Tool call:</h5>
            <div class="row">
                <div class="col-md-2">
                    <div class="tool-metric">
                        <div class="tool-label">Recommend</div>
                        <div class="tool-value" id="tool-recommend">xx</div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="tool-metric">
                        <div class="tool-label">Predeploy</div>
                        <div class="tool-value" id="tool-predeploy">xx</div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="tool-metric">
                        <div class="tool-label">Deploy</div>
                        <div class="tool-value" id="tool-deploy">xx</div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="tool-metric">
                        <div class="tool-label">Region</div>
                        <div class="tool-value" id="tool-region">xx</div>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="tool-metric">
                        <div class="tool-label">Quota</div>
                        <div class="tool-value" id="tool-quota">xx</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Classification Results -->
    <div class="classification-section">
        <div class="row" id="classification-container">
            <!-- Classification cards will be dynamically generated here -->
        </div>
    </div>    <!-- Failed Tasks Section -->
    <div class="failed-tasks-section">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h4><i class="bi bi-exclamation-triangle text-warning me-2"></i>Failed Tasks Analysis</h4>
            <span class="badge bg-danger" id="failed-tasks-count">5 Failed Tasks</span>
        </div>

        <!-- Detailed Failed Tasks List -->
        <div class="top-error-category-card mb-4">
            <div class="row">
                <div class="col-md-4">
                    <div class="top-error-stat text-center p-4">
                        <div class="top-error-icon mb-3">
                            <i class="bi bi-exclamation-circle-fill"></i>
                        </div>
                        <h3 class="mb-2" id="top-error-category">Loading...</h3>
                        <p class="text-muted mb-2">Most Common Error Type</p>
                        <div class="top-error-count" id="top-error-count">
                            <span class="count">0</span> occurrences
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="top-error-details p-4">
                        <h5 class="mb-3">Common Error Patterns</h5>
                        <div id="top-error-patterns">
                            <!-- Error patterns will be dynamically populated -->
                        </div>
                        <div class="error-trend mt-3">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <span>Error Frequency</span>
                                <span id="top-error-percentage">0%</span>
                            </div>
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar bg-danger" id="top-error-progress" role="progressbar" style="width: 0%" 
                                     aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="error-categories-summary mb-4">
            <div class="row" id="error-categories-container">
                <!-- Error category cards will be dynamically populated here -->
            </div>
        </div>
        
        <div class="failed-tasks-card">
            <div class="failed-tasks-header">
                <div class="row fw-bold text-muted">
                    <div class="col-md-2">Task Name</div>
                    <div class="col-md-2">Error Category</div>
                    <div class="col-md-3">First Error Description</div>
                    <div class="col-md-5">Error Details</div>
                </div>
            </div>
            <div class="failed-tasks-content" id="failed-tasks-content">
                <div class="failed-task-item">
                    <div class="row align-items-center">
                        <div class="col-md-3">
                            <span class="task-name">tasktracker-deploy</span>
                        </div>
                        <div class="col-md-3">
                            <span class="error-category badge bg-danger-subtle text-danger">Deployment Error</span>
                        </div>
                        <div class="col-md-6">
                            <span class="error-description">Failed to deploy container: Resource quota exceeded in region eastus</span>
                        </div>
                    </div>
                </div>
                <div class="failed-task-item">
                    <div class="row align-items-center">
                        <div class="col-md-3">
                            <span class="task-name">airsonic-config</span>
                        </div>
                        <div class="col-md-3">
                            <span class="error-category badge bg-warning-subtle text-warning">Configuration Error</span>
                        </div>
                        <div class="col-md-6">
                            <span class="error-description">Invalid database connection string format in appsettings.json</span>
                        </div>
                    </div>
                </div>
                <div class="failed-task-item">
                    <div class="row align-items-center">
                        <div class="col-md-3">
                            <span class="task-name">assessment-build</span>
                        </div>
                        <div class="col-md-3">
                            <span class="error-category badge bg-info-subtle text-info">Build Error</span>
                        </div>
                        <div class="col-md-6">
                            <span class="error-description">Compilation failed: Missing dependency Microsoft.AspNetCore.Mvc v6.0.0</span>
                        </div>
                    </div>
                </div>
                <div class="failed-task-item">
                    <div class="row align-items-center">
                        <div class="col-md-3">
                            <span class="task-name">before-container-test</span>
                        </div>
                        <div class="col-md-3">
                            <span class="error-category badge bg-secondary-subtle text-secondary">Test Error</span>
                        </div>
                        <div class="col-md-6">
                            <span class="error-description">Unit tests failed: 3 out of 15 test cases failed due to timeout</span>
                        </div>
                    </div>
                </div>
                <div class="failed-task-item">
                    <div class="row align-items-center">
                        <div class="col-md-3">
                            <span class="task-name">task-2-infrastructure</span>
                        </div>
                        <div class="col-md-3">
                            <span class="error-category badge bg-danger-subtle text-danger">Infrastructure Error</span>
                        </div>
                        <div class="col-md-6">
                            <span class="error-description">Terraform apply failed: Cannot create storage account, name already exists</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
